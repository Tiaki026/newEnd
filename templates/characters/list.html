{% load static %}
<div class="profile-content">
    {% for character in characters %}
    <div class="character-card {% if character.is_main %}main-character{% endif %}">
        <div class="character-header">
            <h3 class="character-name">{{ character.name }}</h3>
            {% if character.is_main %}
            <span class="main-badge">
                <i class="bi bi-star-fill"></i> Основной
            </span>
            {% endif %}
        </div>
        <div class="card-divider"></div>
        <div class="character-body">
            <div class="character-info">
                <div class="info-row">
                    <span class="info-label">Класс:</span>
                    <span class="info-value">{{ character.specialization.character_class }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Спек:</span>
                    <span class="info-value">{{ character.specialization.name }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Роль:</span>
                    <span class="info-value role-{{ character.specialization.role }}">
                        {{ character.specialization.get_role_display }}
                    </span>
                </div>
                <div class="info-row">
                    <span class="info-label">Создан:</span>
                    <span class="info-value">{{ character.created_at|date:"d.m.Y" }}</span>
                </div>
            </div>
        </div>

        <div class="card-divider"></div>

        <div class="character-footer">
            <div class="character-actions">
                {% if not character.is_main %}
                <form method="post" action="{% url 'characters:set_main' character.id %}" class="d-inline">
                    {% csrf_token %}
                    <button type="submit" class="btn-action set-main" title="Сделать основным">
                        <i class="bi bi-star"></i>
                    </button>
                </form>
                {% endif %}
                <a href="{% url 'characters:edit' character.id %}" 
                    class="btn-action edit profile-edit-link" 
                    data-character-id="{{ character.id }}"
                    title="Редактировать">
                        <i class="bi bi-pencil"></i>
                </a>
                <form method="post" action="{% url 'characters:delete' character.id %}" class="d-inline" 
                      onsubmit="return confirm('Удалить персонажа {{ character.name }}?');">
                    {% csrf_token %}
                    <button type="submit" class="btn-action delete" title="Удалить">
                        <i class="bi bi-trash"></i>
                    </button>
                </form>
            </div>
        </div>
    </div>
    {% endfor %}
</div>